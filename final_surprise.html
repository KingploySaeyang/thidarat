<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday! üéÇ</title>
  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #ff4b91; --secondary: #ff7eb3; --bg-light: #ffe3ef;
      --cake-top: #f7d9e3; --cake-bottom: #e0c3fc;
    }

    body { 
      margin: 0; font-family: 'Mali', cursive; height: 100vh; overflow: hidden;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      background: linear-gradient(-45deg, #ffe3ef, #f3e7ff, #ffe3ec, #fff0f6);
      background-size: 400% 400%; animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

    /* ‡∏°‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏á‡∏à‡∏≠‡∏Ç‡∏≤‡∏ß‡∏ô‡∏ß‡∏• */
    #overlay-curtain {
      position: fixed; inset: 0; background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(8px); z-index: 10000; display: flex;
      flex-direction: column; align-items: center; justify-content: center;
      transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer;
    }
    .curtain-hidden { opacity: 0; visibility: hidden; pointer-events: none; transform: scale(1.1); }

    /* ‚òÅÔ∏è ‡∏Å‡πâ‡∏≠‡∏ô‡πÄ‡∏°‡∏Ü‡∏¢‡∏¥‡πâ‡∏°‡πÑ‡∏î‡πâ */
    .cloud {
      position: absolute; background: white; border-radius: 50px; opacity: 0.6;
      animation: floatCloud linear infinite; z-index: 1; pointer-events: none;
      display: flex; align-items: center; justify-content: center;
    }
    .cloud::before { content: '‚Ä¢ ‚ó° ‚Ä¢'; color: #ff99cc; font-size: 14px; font-weight: bold; }

    @keyframes floatCloud { from { transform: translateX(-150px); } to { transform: translateX(110vw); } }

    /* üå∏ ‡∏Å‡∏•‡∏µ‡∏ö‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ */
    .sakura {
      position: absolute; background: #ffb7c5; border-radius: 100% 0% 100% 0% / 100% 0% 100% 0% ;
      pointer-events: none; animation: fall linear infinite; z-index: 1;
    }
    @keyframes fall { from { transform: translateY(-10vh) rotate(0deg); opacity: 1; } to { transform: translateY(110vh) rotate(720deg); opacity: 0; } }

    /* ‚ú® Cursor Trail */
    .sparkle {
      position: fixed; pointer-events: none; z-index: 99999;
      font-size: 20px; animation: sparkleFade 0.8s forwards;
    }
    @keyframes sparkleFade {
      0% { transform: scale(0) rotate(0deg); opacity: 1; }
      100% { transform: scale(1.5) rotate(180deg); opacity: 0; }
    }

    /* üéÇ ‡πÄ‡∏Ñ‡πâ‡∏Å 2 ‡∏ä‡∏±‡πâ‡∏ô */
    .cake-container { 
      position: relative; z-index: 5; filter: drop-shadow(0 20px 40px rgba(255, 105, 180, 0.4));
      display: flex; flex-direction: column; align-items: center; transition: transform 0.3s;
    }
    
    .tier { position: relative; border: 3px solid #fff; display: flex; justify-content: center; }
    .tier-1 { width: 130px; height: 90px; background: var(--cake-top); border-radius: 20px 20px 5px 5px; z-index: 6; }
    .tier-1:after { content: ""; position: absolute; top: 0; width: 100%; height: 30px; background: #fff; border-radius: 20px 20px 25px 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
    .tier-2 { width: 190px; height: 110px; background: linear-gradient(to bottom, var(--cake-top), var(--cake-bottom)); border-radius: 20px 20px 15px 15px; margin-top: -5px; z-index: 5; }
    .tier-2:after { content: ""; position: absolute; top: 0; width: 100%; height: 35px; background: #fff; border-radius: 20px 20px 25px 25px; }

    /* üïØÔ∏è ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô */
    .candle { 
      position: absolute; top: -50px; width: 14px; height: 55px; 
      background: repeating-linear-gradient(45deg, #ff7eb3, #ff7eb3 8px, #fff 8px, #fff 16px);
      border-radius: 7px; border: 2.5px solid #fff; z-index: 7; cursor: pointer;
    }

    .flame { 
      position: absolute; top: -28px; left: 50%; transform: translateX(-50%); 
      width: 20px; height: 30px; background: #ff9d00; border-radius: 50% 50% 20% 20%; 
      animation: flicker 0.6s infinite alternate; box-shadow: 0 0 25px #ff9d00, 0 0 50px #ffea00; 
    }
    .flame.off { display: none; }

    /* üí® ‡∏Ñ‡∏ß‡∏±‡∏ô‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏î‡∏±‡∏ö */
    .smoke {
      position: absolute; top: -30px; left: 50%; width: 4px; height: 4px; 
      background: rgba(200,200,200,0.8); border-radius: 50%; opacity: 0;
    }
    .smoke-anim { animation: smokeUp 2s forwards; }
    @keyframes smokeUp { 
      0% { transform: translate(-50%, 0) scale(1); opacity: 1; }
      100% { transform: translate(-50%, -100px) scale(4); opacity: 0; filter: blur(5px); }
    }

    /* üíå ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
    .message { 
      margin-top: 40px; text-align: center; z-index: 5; opacity: 0;
      background: rgba(255, 255, 255, 0.55); padding: 25px 35px; border-radius: 30px;
      backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.7); max-width: 85%;
      box-shadow: 0 15px 35px rgba(255, 105, 180, 0.15);
    }
    .message-active { opacity: 1; animation: fadeInUp 1.5s forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

    #hint { font-weight: bold; color: var(--primary); animation: pulse 1.2s infinite; font-size: 1.4rem; text-shadow: 0 2px 10px rgba(255,255,255,1); }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); opacity: 0.8; } }

    /* üê∞ Peeking Bunny */
    .bunny {
      position: absolute; bottom: 85px; right: 20px; font-size: 40px;
      transform: translateY(100%); transition: transform 0.5s ease; z-index: 4;
    }
    .bunny-peek { transform: translateY(0); }

    /* üéÅ Floating Gift */
    .gift {
      position: absolute; bottom: -50px; font-size: 30px; cursor: pointer;
      animation: giftFloat linear forwards; z-index: 3;
    }
    @keyframes giftFloat { from { bottom: -50px; } to { bottom: 110vh; transform: rotate(360deg); } }

    /* Screen Shake */
    .shake { animation: screenShake 0.5s; }
    @keyframes screenShake {
      0%, 100% { transform: translate(0,0); }
      10%, 30%, 50%, 70%, 90% { transform: translate(-5px, 2px); }
      20%, 40%, 60%, 80% { transform: translate(5px, -2px); }
    }
  </style>
</head>
<body onclick="startAll()" onmousemove="createSparkle(event)" ontouchmove="createSparkle(event)">

  <div id="overlay-curtain">
    <div id="hint">‚ú® ‡πÅ‡∏ï‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡πå‡∏™ ‚ú®</div>
    <p style="margin-top:15px; font-size: 0.9rem; color: #888;">(‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏ô‡∏™‡∏ß‡∏¢)</p>
  </div>

  <audio id="bdaySong" loop>
    <source src="hook.mp3" type="audio/mpeg">
  </audio>

  <div class="bunny" id="bunny">üê∞</div>

  <div class="cake-container" id="parallax-box">
    <div class="candle" id="candle" onclick="extinguish(event)">
      <div class="flame" id="flame"></div>
      <div class="smoke" id="smoke"></div>
    </div>
    <div class="tier tier-1"></div>
    <div class="tier tier-2"></div>
  </div>

  <div class="message" id="msg-box">
    <h1 style="color: var(--primary); margin-bottom: 5px;">‚ú® ‡πÅ‡∏Æ‡∏õ‡∏õ‡∏µ‡πâ 25 ‡∏õ‡∏µ‡∏à‡πâ‡∏≤ ‡∏≠‡∏¥‡∏≠‡∏∏ ‚ú®</h1>
    <p style="font-size: 1.1rem; color: #4a3a45; margin: 0; line-height: 1.7;">
        ‡πÇ‡∏ï‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏µ‡πÅ‡∏Å‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢‡∏ô‡∏∞ <br>
        ‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏≠‡∏¢‡∏¢‡∏¥‡πâ‡∏° ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡πÜ ‡∏ß‡∏±‡∏ô <br>
        ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏µ‡πà‡∏â‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏ô‡∏™‡∏ß‡∏¢ üíñ <br>
        <span style="display:block; margin-top:10px; font-size: 0.9rem; color: var(--primary); font-weight: bold;">üå¨Ô∏è ‡∏à‡∏¥‡πâ‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πà‡∏≤‡πÄ‡∏Ñ‡πâ‡∏Å‡∏î‡∏π‡∏™‡∏¥!</span>
    </p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <script>
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
    function initDecoration() {
      for(let i=0; i<6; i++) {
        let cloud = document.createElement('div');
        cloud.className = 'cloud';
        cloud.style.width = Math.random() * 100 + 100 + 'px';
        cloud.style.height = '40px';
        cloud.style.top = Math.random() * 80 + 'vh';
        cloud.style.animationDuration = Math.random() * 20 + 20 + 's';
        cloud.style.animationDelay = Math.random() * -20 + 's';
        document.body.appendChild(cloud);
      }
      setInterval(() => {
        let petal = document.createElement('div');
        petal.className = 'sakura';
        petal.style.left = Math.random() * 100 + 'vw';
        petal.style.width = Math.random() * 10 + 10 + 'px';
        petal.style.height = petal.style.width;
        petal.style.animationDuration = Math.random() * 5 + 5 + 's';
        document.body.appendChild(petal);
        setTimeout(() => petal.remove(), 10000);
      }, 400);
    }
    initDecoration();

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏¢‡∏ß‡∏¥‡πâ‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏°‡∏≤‡∏™‡πå
    function createSparkle(e) {
      let sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.textContent = ['‚ú®', 'üíñ', '‚≠ê', 'üå∏'][Math.floor(Math.random() * 4)];
      let x = e.clientX || e.touches[0].clientX;
      let y = e.clientY || e.touches[0].clientY;
      sparkle.style.left = x + 'px';
      sparkle.style.top = y + 'px';
      document.body.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 800);
    }

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏•‡∏≠‡∏¢
    function spawnGift() {
      if(!started) return;
      let gift = document.createElement('div');
      gift.className = 'gift';
      gift.textContent = 'üéÅ';
      gift.style.left = Math.random() * 90 + 'vw';
      gift.style.animationDuration = Math.random() * 3 + 4 + 's';
      gift.onclick = (e) => {
        e.stopPropagation();
        confetti({ particleCount: 40, spread: 50, origin: { x: e.clientX/window.innerWidth, y: e.clientY/window.innerHeight } });
        gift.remove();
      };
      document.body.appendChild(gift);
      setTimeout(() => gift.remove(), 7000);
    }

    let started = false;
    function startAll() {
      if(started) return;
      started = true;
      document.getElementById('bdaySong').play();
      document.getElementById('overlay-curtain').classList.add('curtain-hidden');
      document.getElementById('msg-box').classList.add('message-active');
      
      confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#ffb7c5', '#ff4b91', '#ffffff'] });
      setInterval(spawnGift, 2000);
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡πà‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô
    function extinguish(e) {
      e.stopPropagation();
      const flame = document.getElementById('flame');
      const smoke = document.getElementById('smoke');
      const bunny = document.getElementById('bunny');
      
      if (!flame.classList.contains('off')) {
        flame.classList.add('off');
        smoke.classList.add('smoke-anim');
        bunny.classList.add('bunny-peek');
        document.body.classList.add('shake');
        setTimeout(() => document.body.classList.remove('shake'), 500);
        
        // ‡∏û‡∏•‡∏∏‡∏à‡∏±‡∏î‡πÄ‡∏ï‡πá‡∏°
        var end = Date.now() + (2 * 1000);
        (function frame() {
          confetti({ particleCount: 7, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ffb7c5', '#ff4b91'] });
          confetti({ particleCount: 7, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#e0c3fc', '#ffffff'] });
          if (Date.now() < end) requestAnimationFrame(frame);
        }());
      }
    }

    // Parallax
    document.addEventListener('mousemove', (e) => {
      const box = document.getElementById('parallax-box');
      const x = (window.innerWidth / 2 - e.pageX) / 30;
      const y = (window.innerHeight / 2 - e.pageY) / 30;
      box.style.transform = `translateX(${x}px) translateY(${y}px)`;
    });
  </script>
</body>
</html>